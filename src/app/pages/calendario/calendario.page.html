<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/comunicados"></ion-back-button>
    </ion-buttons>
    <ion-title>Calendário</ion-title>
    <ion-buttons slot="end">
      <ion-menu-button class="menu-button-externo"></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="calendar-container">
    <!-- top banner -->
    <div class="month-banner">
      <div class="month-left">
        <div class="month-day">{{ (current.getDate() | number:'2.0') }}</div>
        <div class="month-sun">☀️</div>
      </div>
      <div class="month-center">
        <div class="month-number">{{ (currentMonth + 1) | number:'2.0' }}</div>
        <div class="month-name">{{ getMonthNameShort(currentMonth) }}</div>
      </div>
      <div class="month-right">
        <div class="year">{{ currentYear }}</div>
      </div>
    </div>

    <!-- controls -->
    <div class="nav-controls">
      <button class="nav-btn" (click)="prevMonth()">◀</button>
      <div class="nav-title">{{ getMonthNameShort(currentMonth) }} {{ currentYear }}</div>
      <button class="nav-btn" (click)="nextMonth()">▶</button>
    </div>

    <!-- weekdays -->
    <div class="weekday-row">
      <div *ngFor="let w of ['D','S','T','Q','Q','S','S']" class="weekday">{{ w }}</div>
    </div>

    <!-- calendar grid -->
    <div class="calendar-grid">
      <div *ngFor="let week of weeks" class="week-row">
        <div *ngFor="let day of week"
             class="day-cell"
             [class.out-month]="!day.inMonth">
          <div class="day-number" *ngIf="day.inMonth">{{ day.dayNumber }}</div>

          <!-- event marker (from docente) -->
          <div *ngIf="day.event" class="event-marker" [ngClass]="day.event.color">
            ✖
          </div>

          <div *ngIf="day.event" class="event-title">{{ day.event.title }}</div>
        </div>
      </div>
    </div>

    <!-- refreshed button (replaced as requested) -->
    <div class="refresh-wrap">
      <ion-button class="refresh-btn" fill="solid" size="large" (click)="refresh()">
        <ion-icon name="sync-outline" slot="start"></ion-icon>
        Atualizar eventos
      </ion-button>
    </div>
  </div>
</ion-content>